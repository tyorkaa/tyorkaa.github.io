{"version":3,"sources":["webpack:///./src/components/Shop/Product/index.tsx","webpack:///./src/components/Shop/index.tsx","webpack:///./src/pages/shop.tsx","webpack:///./node_modules/isomorphic-base64/browser.js","webpack:///./src/components/FastImage/index.tsx","webpack:///./src/hooks/squareCovers.ts"],"names":["b","b_","Product","url","name","price","pic","useSquareCovers","title","useDescription","className","to","products","require","Shop","filter","product","map","key","id","path","ShopPage","Layout","exports","atob","self","bind","btoa","Image","color","src","width","height","svg","back","allFile","edges","reduce","result","node","relativePath","split","childImageSharp","resize","dominantColor"],"mappings":"kOAcMA,G,UAAIC,OAAQ,iBAuBHC,EArBmB,SAAC,GAAyB,IAAvBC,EAAuB,EAAvBA,IAAKC,EAAkB,EAAlBA,KAAMC,EAAY,EAAZA,MAExCC,EADSC,cACIH,GAEZI,EAASC,YAAeL,GAAxBI,MAEP,OACE,gBAAC,IAAD,CACEE,UAAWV,IACXW,GAAIR,GAEJ,uBAAKO,UAAWV,EAAE,UAChB,gBAAC,IAAUM,IAEb,uBAAKI,UAAWV,EAAE,UAAWQ,GAC5BH,GAAS,uBAAKK,UAAWV,EAAE,UAAWK,EAA7B,QC1BRO,G,UAA4BC,EAAQ,QAApCD,UAIFZ,EAAIC,OAAQ,QAmBHa,EAjBS,WACtB,OACE,2BAASJ,UAAWV,KACjBY,EACEG,QAAO,SAAAC,GAAO,QAAMA,EAAQX,SAC5BY,KAAI,SAACD,GAAD,OACH,gBAAC,EAAD,CACEE,IAAKF,EAAQG,GACbf,KAAMY,EAAQI,KACdjB,IAAG,SAAWa,EAAQI,KACtBf,MAAOW,EAAQX,aCZZgB,UALE,kBACf,gBAACC,EAAA,EAAD,KACE,gBAAC,EAAD,S,oCCJJ,EAAQ,QAERC,EAAQC,KAAOC,KAAKD,KAAKE,KAAKD,MAC9BF,EAAQI,KAAOF,KAAKE,KAAKD,KAAKD,O,65KCL9B,0EAMMzB,GANN,UAMUC,OAAQ,eAML2B,EAAyB,SAAC,GAMjC,IALJlB,EAKI,EALJA,UACAmB,EAII,EAJJA,MACAC,EAGI,EAHJA,IAGI,IAFJC,aAEI,MAFI,GAEJ,MADJC,cACI,MADK,GACL,EACEC,EAAM,kDAAkDF,EAArD,aAAuEC,EAAvE,iBAA8FH,EAA9F,YAA+GE,EAA/G,aAAiIC,EAAjI,YACHE,EAAO,6BAA6BP,eAAKM,GAE/C,OACE,uBAAKvB,UAAcV,IAAL,KAAYU,GAAa,KACrC,uBAAKoB,IAAKI,EAAMxB,UAAWV,EAAE,UAC7B,uBAAK8B,IAAKA,EAAKpB,UAAWV,EAAE,c,8FCbrBO,EAAkB,WAuB7B,OAtBa,OAsBD4B,QAAQC,MAAMC,QAAO,SAACC,EAAD,GAAsB,kBAAXC,EAAW,EAAXA,KAS1C,OAPAD,EADaC,EAAKC,aAAaC,MAAM,KAAK,IAC3B,CACbX,IAAG,UAAES,EAAKG,uBAAP,iBAAE,EAAsBC,cAAxB,aAAE,EAA8Bb,IACnCC,MAAK,UAAEQ,EAAKG,uBAAP,iBAAE,EAAsBC,cAAxB,aAAE,EAA8BZ,MACrCC,OAAM,UAAEO,EAAKG,uBAAP,iBAAE,EAAsBC,cAAxB,aAAE,EAA8BX,OACtCH,OAAO,UAAAU,EAAKK,qBAAL,eAAoBf,QAAS,SAG/BS,IACN","file":"component---src-pages-shop-tsx-1bfb506cf7aac37fa75a.js","sourcesContent":["import * as React from 'react';\nimport * as b_ from 'b_';\nimport { Link, graphql } from 'gatsby';\nimport {useSquareCovers} from '../../../hooks/squareCovers'\nimport { useDescription } from '../../../hooks/md';\nimport {Image} from '../../FastImage'\nimport './index.scss';\n\ninterface Props {\n  url: string;\n  name: string;\n  price?: number\n}\n\nconst b = b_.with('shop-product');\n\nconst Product: React.SFC<Props> = ({ url, name, price }) => {\n  const covers = useSquareCovers();\n  const pic = covers[name];\n\n  const {title} = useDescription(name);\n\n  return (\n    <Link\n      className={b()}\n      to={url}\n    >\n      <div className={b(\"photo\")}>\n        <Image {...pic}/>\n      </div>\n      <div className={b('title')}>{title}</div>\n      {price && <div className={b('price')}>{price} â‚½</div>}\n    </Link>\n\n  );\n}\n\nexport default Product;","import * as React from 'react'\nimport * as b_ from 'b_'\nimport ProductView from './Product';\nimport { ProductsJson } from '../../types';\n\nconst { products }:  ProductsJson = require('../../products/products.json');\n\nimport './index.scss';\n\nconst b = b_.with('shop');\n\nconst Shop: React.SFC = () => {\n  return (\n    <section className={b()}>\n      {products\n        .filter(product => !!product.price)\n        .map((product) =>\n          <ProductView\n            key={product.id}\n            name={product.path}\n            url={`/shop/${product.path}`}\n            price={product.price}\n          />\n      )}\n    </section>\n  );\n}\n\nexport default Shop;","import * as React from 'react'\nimport Layout from '../components/Layout'\nimport Shop from '../components/Shop'\n\nconst ShopPage = () =>\n  <Layout>\n    <Shop />\n  </Layout>\n\nexport default ShopPage\n","'use strict';\n\nrequire(\"core-js/modules/es6.function.bind\");\n\nexports.atob = self.atob.bind(self);\nexports.btoa = self.btoa.bind(self);","import * as React from 'react'\nimport * as b_ from 'b_';\nimport { btoa } from 'isomorphic-base64'\n\nimport './index.scss';\n\nconst b = b_.with('fast-image');\n\ninterface Props extends React.HTMLProps<HTMLImageElement> {\n  color: string\n}\n\nexport const Image: React.FC<Props> = ({\n  className,\n  color,\n  src,\n  width = 10,\n  height = 10\n}) => {\n  const svg = `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${width}\" height=\"${height}\"><rect fill=\"${color}\" width=\"${width}\" height=\"${height}\"/></svg>`\n  const back = `data:image/svg+xml;base64,${btoa(svg)}`;\n\n  return (\n    <div className={`${b()} ${className || ''}`}>\n      <img src={back} className={b('back')}/>\n      <img src={src} className={b('image')}/>\n    </div>\n  )\n}\n","import { useStaticQuery, graphql } from \"gatsby\";\nimport { SquareCoversQuery } from '../../gatsby-graphql';\n\ninterface Img {\n  src: string\n  color: string\n  width: number\n  height: number\n}\n\ninterface Cover {[path: string]: Img}\n\nexport const useSquareCovers = () => {\n  const data = useStaticQuery<SquareCoversQuery>(graphql`\n    query SquareCovers {\n      allFile(filter: {relativePath: {regex: \"/cover\\\\./\"}}){\n        edges{\n          node{\n            relativePath\n            childImageSharp{\n              resize(quality:95, height: 200, width: 200){\n                src\n                width\n                height\n              }\n            }\n            dominantColor {\n              color\n            }\n          }\n        }\n      }\n    }\n  `);\n\n  return data.allFile.edges.reduce((result, { node }) => {\n    const path = node.relativePath.split('/')[0];\n    result[path] = {\n      src: node.childImageSharp?.resize?.src!,\n      width: node.childImageSharp?.resize?.width!,\n      height: node.childImageSharp?.resize?.height!,\n      color: node.dominantColor?.color || 'white'\n\n    };\n    return result;\n  }, {} as Cover);\n}"],"sourceRoot":""}