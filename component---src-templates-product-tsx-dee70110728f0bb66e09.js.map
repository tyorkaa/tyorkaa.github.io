{"version":3,"sources":["webpack:///./src/components/Product/index.tsx","webpack:///./src/templates/product.tsx","webpack:///./node_modules/gatsby/node_modules/core-js/modules/es6.array.find.js"],"names":["b","b_","Product","id","pics","title","price","inCart","useSelector","state","cart","items","find","item","dispatch","useDispatch","className","src","preview","onClick","push","actions","addToCart","query","formatPics","data","slides","allFile","edges","map","node","name","relativePath","split","slideProps","slide","childImageSharp","resize","original","ProductPage","pathContext","description","slug","Layout","$export","$find","forced","Array","P","F","callbackfn","this","arguments","length","undefined"],"mappings":"+PAiBMA,G,UAAIC,OAAQ,YAyCHC,EAvCmB,SAAC,GAA6B,IAA5BC,EAA4B,EAA5BA,GAAIC,EAAwB,EAAxBA,KAAMC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,MAC7CC,EAASC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,KAAKC,MAAMC,MAAK,SAAAC,GAAI,OAAIA,EAAKV,KAAOA,QACrFW,EAAWC,cAMjB,OACE,uBAAKC,UAAWhB,KACd,+BACE,uBAAKgB,UAAWhB,EAAE,UAChB,uBAAKiB,IAAKb,EAAK,GAAGc,QAAQD,QAI9B,+BACE,uBAAKD,UAAWhB,EAAE,WAChB,uBAAKgB,UAAWhB,EAAE,UACfK,GAGFC,GAAS,uBAAKU,UAAWhB,EAAE,UACzBM,EADO,MAIV,2BAEIC,EACE,0BAAQS,UAAWhB,EAAE,OAAQmB,QAvB1B,kBAAMC,YAAK,WAuBd,qBACA,0BAAQJ,UAAWhB,EAAE,OAAQmB,QA1BzB,kBAAML,EAASO,IAAQC,UAAUnB,MA0BrC,2B,YCQHoB,EAAQ,aA4BfC,EAAa,SAACC,EAAYC,GAAb,OACjBD,EAAKE,QAAQC,MAAMC,KAAI,YAAc,IAAXC,EAAW,EAAXA,KAClBC,EAAOD,EAAKE,aAAaC,MAAM,KAAK,GACpCC,EAAaR,EAAOd,MAAK,SAAAuB,GAAK,OAAIA,EAAMhC,KAAO4B,KAErD,sBACEA,OACAb,QAASY,EAAKM,gBAAgBC,OAC9BC,SAAUR,EAAKM,gBAAgBE,UAC5BJ,OAIMK,UApDK,SAAC,GAGR,QAFXC,YAAerC,EAEJ,EAFIA,GAAIE,EAER,EAFQA,MAAoBC,GAE5B,EAFemC,YAEf,EAF4BnC,OAAaoB,GAEzC,EAFmCgB,KAEnC,EAFyChB,QACpDD,EACW,EADXA,KAEA,OACE,gBAACkB,EAAA,EAAD,KACE,gBAAC,EAAD,CAASxC,GAAIA,EAAIC,KAAMoB,EAAWC,EAAMC,GAASrB,MAAOA,EAAOC,MAAOA,O,kCClD5E,IAAIsC,EAAU,EAAQ,QAClBC,EAAQ,EAAQ,OAAR,CAA4B,GAEpCC,GAAS,EADH,QAGC,IAAIC,MAAM,GAAM,MAAE,WAAcD,GAAS,KACpDF,EAAQA,EAAQI,EAAIJ,EAAQK,EAAIH,EAAQ,QAAS,CAC/ClC,KAAM,SAAcsC,GAClB,OAAOL,EAAMM,KAAMD,EAAYE,UAAUC,OAAS,EAAID,UAAU,QAAKE,MAGzE,EAAQ,OAAR,CATU","file":"component---src-templates-product-tsx-dee70110728f0bb66e09.js","sourcesContent":["import * as React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport * as b_ from 'b_';\nimport { push } from 'gatsby';\nimport { Slide } from '../Single/types';\nimport { actions } from '../../state/actions';\nimport { RootState } from '../../state/reducer';\n\nimport './index.scss';\n\ninterface Props {\n  id: string\n  pics: Slide[];\n  title: string\n  price?: number\n}\n\nconst b = b_.with('product');\n\nconst Product: React.SFC<Props> = ({id, pics, title, price}) => {\n  const inCart = useSelector((state: RootState) => state.cart.items.find(item => item.id === id))\n  const dispatch = useDispatch();\n\n  const addToCart = () => dispatch(actions.addToCart(id));\n\n  const goToCart = () => push('/cart')\n\n  return (\n    <div className={b()}>\n      <section>\n        <div className={b('photo')}>\n          <img src={pics[0].preview.src} />\n        </div>\n      </section>\n\n      <section>\n        <div className={b('column')}>\n          <div className={b('title')}>\n            {title}\n          </div>\n\n          {price && <div className={b('price')}>\n            {price} ₽\n          </div>}\n\n          <div>\n            {\n              inCart\n              ? <button className={b('btn')} onClick={goToCart}>Перейти в корзину</button>\n              : <button className={b('btn')} onClick={addToCart}>Добавить в корзину</button>\n            }\n          </div>\n        </div>\n      </section>\n    </div>\n  );\n}\n\nexport default Product","import * as React from 'react'\nimport { graphql } from 'gatsby'\nimport Product from '../components/Product'\nimport { AllFile } from '../types'\nimport { Image } from '../components/Single/types'\nimport Layout from '../components/Layout'\n\ntype Data = AllFile<{\n  name: string\n  relativePath: string\n  childImageSharp: {\n    resize: {\n      src: string\n      width: number\n      height: number\n    }\n    original: {\n      src: string\n      width: number\n      height: number\n    }\n  }\n}>\n\ninterface Slide {\n  id: string\n  name: string\n  preview: Image\n  original: Image\n  positionX: number\n  positionY: number\n  size: number\n}\n\ninterface Props {\n  pathContext: {\n    id: string\n    slug: string\n    title: string\n    description?: string\n    price?: number\n    slides: Slide[]\n  }\n  data: Data\n}\n\nconst ProductPage = ({\n  pathContext: { id, title, description, price, slug, slides },\n  data,\n}: Props) => {\n  return (\n    <Layout>\n      <Product id={id} pics={formatPics(data, slides)} title={title} price={price} />\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query($slug: String!) {\n    allFile(\n      filter: { relativeDirectory: { eq: $slug }, extension: { ne: \"html\" } }\n    ) {\n      edges {\n        node {\n          name\n          relativePath\n          childImageSharp {\n            resize(height: 200, width: 200, quality: 95) {\n              src\n              width\n              height\n            }\n\n            original {\n              src\n              width\n              height\n            }\n          }\n        }\n      }\n    }\n  }\n`\n\nconst formatPics = (data: Data, slides: Slide[]) =>\n  data.allFile.edges.map(({ node }) => {\n    const name = node.relativePath.split('/')[1]\n    const slideProps = slides.find(slide => slide.id === name)\n\n    return {\n      name,\n      preview: node.childImageSharp.resize,\n      original: node.childImageSharp.original,\n      ...slideProps,\n    }\n  })\n\nexport default ProductPage\n","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n"],"sourceRoot":""}