(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{137:function(t,n,e){"use strict";e.r(n);e(33),e(77),e(78),e(48);var i=e(0),o=e(7),r=e.n(o),c=e(138),s=(e(145),e(147),e(149),e(150),e(151),c.with("mobile-slider-slide")),u=function(t){function n(){return t.apply(this,arguments)||this}return r()(n,t),n.prototype.render=function(){var t=this.props,n=t.width,e=t.touchPosition,o=t.index,r=t.current,c=t.isScrolling,u=t.pic,a=t.geo,l=t.onClick,d=(o-r)*n+e;return i.createElement("div",{className:s("image-wrap",{smooth:!c}),style:{left:d+"px"},onClick:l},i.createElement("div",{className:s("image"),style:{backgroundImage:"url("+u.src+")",backgroundPositionX:a.positionX+"px",backgroundPositionY:a.positionY+"px",backgroundSize:a.size+"%"}}))},n}(i.Component),a=(e(153),e(155)),l=e(156),d=c.with("mobile-slider"),h=function(t){function n(n){var e;return(e=t.call(this,n)||this).container=null,e.updateWidth=function(){if(e.container){var t=e.container.getBoundingClientRect().width;e.setState({width:t})}},e.onTouchMove=function(t){var n=e.state.touchStartPosition;e.setState({touchPosition:e.getTouchPosition(t.touches[0].pageX-n)})},e.onTouchStart=function(t){e.setState({touchStartPosition:t.touches[0].pageX,isScrolling:!0})},e.onTouchEnd=function(t){e.setState({current:e.getCurrent(),touchPosition:0,isScrolling:!1})},e.state={width:0,current:0,touchPosition:0,touchStartPosition:0,isScrolling:!0,zoomed:!1},e}r()(n,t);var e=n.prototype;return e.render=function(){var t=this,n=this.props,e=n.slug,o=n.pics,r=n.onClick,c=this.state,s=c.current,h=c.width,M=c.touchPosition,m=c.isScrolling;return i.createElement("div",{className:d(),ref:function(n){return t.container=n}},i.createElement("div",{className:d("wrapper"),style:{height:h/1.5+"px"}},h&&o.map(function(t,n){return i.createElement(u,{key:n,slug:e,name:t.name,pic:t.preview,geo:{positionX:t.positionX,positionY:t.positionY,size:t.size},index:n,width:h,height:h/1.5,current:s,touchPosition:M,isScrolling:m,onClick:function(t){function n(){return t.apply(this,arguments)}return n.toString=function(){return t.toString()},n}(function(){return r(t)})})})),i.createElement("div",{className:d("dots")},o.map(function(n,e){return i.createElement("div",{key:e,className:d("dot"),onClick:function(){return t.setState({current:e})}},i.createElement("img",{src:e===t.state.current?l:a,alt:"o"}))})))},e.getTouchPosition=function(t){var n=this.props.pics,e=this.state.current;return n.length&&(0===e&&t>0||e===n.length-1&&t<0)?t/10:t},e.getCurrent=function(){var t=this.props.pics,n=this.state,e=n.width,i=n.touchPosition,o=n.current,r=Math.round(i/(e/2)),c=o-(r?r/Math.abs(r):0);if(t.length){if(c<0)return 0;if(c>t.length-1)return t.length-1}return c},e.componentDidMount=function(){this.updateWidth(),window.addEventListener("resize",this.updateWidth),window.document.addEventListener("resize",this.updateWidth),this.container&&(this.container.addEventListener("touchmove",this.onTouchMove),this.container.addEventListener("touchstart",this.onTouchStart),this.container.addEventListener("touchend",this.onTouchEnd),this.container.addEventListener("touchcancel",this.onTouchEnd))},e.componentWillUnmount=function(){window.removeEventListener("resize",this.updateWidth),this.container&&(this.container.removeEventListener("touchmove",this.onTouchMove),this.container.removeEventListener("touchstart",this.onTouchStart),this.container.removeEventListener("touchend",this.onTouchEnd),this.container.removeEventListener("touchcancel",this.onTouchEnd))},n}(i.Component),M=e(157),m=(e(158),c.with("zoom")),p=function(t){function n(){return t.apply(this,arguments)||this}return r()(n,t),n.prototype.render=function(){var t=this.props,n=t.src,e=t.onClose;return i.createElement("div",{className:m(),onClick:e},i.createElement("img",{ref:function(t){return t&&new M.a(t)},src:n}))},n}(i.Component),N=(e(160),c.with("single")),g=function(t){function n(){for(var n,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(n=t.call.apply(t,[this].concat(i))||this).state={},n.onUnzoom=function(t){"zoomed"!==t.state&&n.setState({zoomed:void 0})},n}r()(n,t);var e=n.prototype;return e.render=function(){var t=this,n=this.props,e=n.slug,o=n.pics,r=n.title,c=n.description,s=n.price,u=this.state.zoomed;return i.createElement("section",{className:N()},i.createElement(h,{pics:o,slug:e,onClick:function(n){return t.zoom(n)}}),u&&i.createElement(p,Object.assign({},u.original,{onClose:function(){return window.history.back()}})),i.createElement("div",{className:N("title")},r),i.createElement("div",{className:N("description")},c),!!s&&i.createElement(i.Fragment,null,i.createElement("div",{className:N("price")},"Цена: ",i.createElement("span",null,s," Р")),i.createElement("button",{className:N("buy-btn")},"Купить")))},e.zoom=function(t){this.setState({zoomed:t}),window.history.pushState("zoomed","",null)},e.componentDidMount=function(){window.onpopstate=this.onUnzoom},n}(i.Component);e.d(n,"query",function(){return z});var z="2637456461",w=function(t,n){return t.allFile.edges.map(function(t){var e=t.node,i=e.relativePath.split("/")[1],o=n.find(function(t){return t.id===i});return Object.assign({name:i,preview:e.childImageSharp.resize,original:e.childImageSharp.original},o)})};n.default=function(t){var n=t.pathContext,e=(n.id,n.title),o=n.description,r=n.price,c=n.slug,s=n.slides,u=t.data;return i.createElement(g,{slug:c,pics:w(u,s),title:e,description:o,price:r})}},151:function(t,n,e){},153:function(t,n,e){},155:function(t,n){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMzciIGhlaWdodD0iMzciIHZlcnNpb249IjEuMSIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb247IHRleHQtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbjsgaW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTsgZmlsbC1ydWxlOmV2ZW5vZGQ7IGNsaXAtcnVsZTpldmVub2RkIg0Kdmlld0JveD0iMCAwIDM3IDM3Ig0KIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiA8Zz4NCiAgPHBhdGggZmlsbD0iIzIyMiIgZD0ibTExLjgwNDEyLDExLjc4NjczYzMuNDY5NDUsLTMuNjc1OTQgMTAuNjIwODMsLTQuNDM4MzIgMTQuMTI0NzksLTAuNTMzOTJjMy41MDM5NiwzLjkwNDQgNi4wNzM1Miw5LjMzNzA0IC00LjAzNzg5LDE1LjM0MzgyYy0xMC4xMTE0LDYuMDA2NzcgLTE3LjAyNTgxLC03LjQ1OCAtMTAuMDg2OSwtMTQuODA5OXptMjEuNDQwNzcsMTkuMzE0MTRjMCwtMy42NzU5NSAzLjQ2OTQ1LC03LjM1MTkgMy40Njk0NSwtMTEuMDI3ODVjMCwtNy4zNTE4OSAtMy40Njk0NSwtMTQuNzAzNzkgLTEwLjQwODM2LC0xOC4zNzk3NGMtMy40Njk0NSwtMy42NzU5NSAtMTcuMzQ3MjYsMCAtMjAuODE2NzEsMy42NzU5NWMtNi45Mzg5LDcuMzUxOSAtNi45Mzg5LDE4LjM3OTc0IDAsMjUuNzMxNjRjNi45Mzg5MSw3LjM1MTkgMTcuMzQ3MjYsNy4zNTE5IDI3Ljc1NTYyLDB6Ii8+DQogPC9nPg0KPC9zdmc+DQo="},156:function(t,n){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzciIGhlaWdodD0iMzciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgY2xpcC1ydWxlPSJldmVub2RkIj4KIDxnPgogICA8cGF0aCBkPSJtMzMuMjQ0ODksMzEuMTAwODdjMCwtMy42NzU5NSAzLjQ2OTQ1LC03LjM1MTkgMy40Njk0NSwtMTEuMDI3ODVjMCwtNy4zNTE4OSAtMy40Njk0NSwtMTQuNzAzNzkgLTEwLjQwODM2LC0xOC4zNzk3NGMtMy40Njk0NSwtMy42NzU5NSAtMTcuMzQ3MjYsMCAtMjAuODE2NzEsMy42NzU5NWMtNi45Mzg5LDcuMzUxOSAtNi45Mzg5LDE4LjM3OTc0IDAsMjUuNzMxNjRjNi45Mzg5MSw3LjM1MTkgMTcuMzQ3MjYsNy4zNTE5IDI3Ljc1NTYyLDB6IiBmaWxsPSIjMjIyIi8+CiA8L2c+Cjwvc3ZnPg=="},158:function(t,n,e){},160:function(t,n,e){}}]);
//# sourceMappingURL=component---src-templates-single-tsx-e6932e9e94be66215f1f.js.map