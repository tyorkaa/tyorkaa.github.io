(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{137:function(t,e,n){"use strict";n.r(e);n(33),n(77),n(78),n(48);var i=n(0),o=n(7),r=n.n(o),c=n(138),s=(n(145),n(147),n(149),n(150),n(151),c.with("mobile-slider-slide")),a=function(t){function e(){return t.apply(this,arguments)||this}return r()(e,t),e.prototype.render=function(){var t=this.props,e=t.width,n=t.touchPosition,o=t.index,r=t.current,c=t.isScrolling,a=t.pic,u=t.geo,l=t.onClick,h=(o-r)*e+n;return i.createElement("div",{className:s("image-wrap",{smooth:!c}),style:{left:h+"px"},onClick:l},i.createElement("div",{className:s("image"),style:{backgroundImage:"url("+a.src+")",backgroundPositionX:u.positionX+"px",backgroundPositionY:u.positionY+"px",backgroundSize:u.size+"%"}}))},e}(i.Component),u=(n(153),n(155)),l=n(156),h=c.with("mobile-slider"),d=function(t){function e(e){var n;return(n=t.call(this,e)||this).container=null,n.updateWidth=function(){if(n.container){var t=n.container.getBoundingClientRect().width;n.setState({width:t})}},n.onTouchMove=function(t){var e=n.state.touchStartPosition;n.setState({touchPosition:n.getTouchPosition(t.touches[0].pageX-e)})},n.onTouchStart=function(t){n.setState({touchStartPosition:t.touches[0].pageX,isScrolling:!0})},n.onTouchEnd=function(t){n.setState({current:n.getCurrent(),touchPosition:0,isScrolling:!1})},n.state={width:0,current:0,touchPosition:0,touchStartPosition:0,isScrolling:!0,zoomed:!1},n}r()(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.slug,o=e.pics,r=e.onClick,c=this.state,s=c.current,d=c.width,p=c.touchPosition,m=c.isScrolling;return i.createElement("div",{className:h(),ref:function(e){return t.container=e}},i.createElement("div",{className:h("wrapper"),style:{height:d/1.5+"px"}},d&&o.map(function(t,e){return i.createElement(a,{key:e,slug:n,name:t.name,pic:t.preview,geo:{positionX:t.positionX,positionY:t.positionY,size:t.size},index:e,width:d,height:d/1.5,current:s,touchPosition:p,isScrolling:m,onClick:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return r(t)})})})),i.createElement("div",{className:h("dots")},o.map(function(e,n){return i.createElement("div",{key:n,className:h("dot"),onClick:function(){return t.setState({current:n})}},i.createElement("img",{src:n===t.state.current?l:u,alt:"o"}))})))},n.getTouchPosition=function(t){var e=this.props.pics,n=this.state.current;return e.length&&(0===n&&t>0||n===e.length-1&&t<0)?t/10:t},n.getCurrent=function(){var t=this.props.pics,e=this.state,n=e.width,i=e.touchPosition,o=e.current,r=Math.round(i/(n/2)),c=o-(r?r/Math.abs(r):0);if(t.length){if(c<0)return 0;if(c>t.length-1)return t.length-1}return c},n.componentDidMount=function(){this.updateWidth(),window.addEventListener("resize",this.updateWidth),window.document.addEventListener("resize",this.updateWidth),this.container&&(this.container.addEventListener("touchmove",this.onTouchMove),this.container.addEventListener("touchstart",this.onTouchStart),this.container.addEventListener("touchend",this.onTouchEnd),this.container.addEventListener("touchcancel",this.onTouchEnd))},n.componentWillUnmount=function(){window.removeEventListener("resize",this.updateWidth),this.container&&(this.container.removeEventListener("touchmove",this.onTouchMove),this.container.removeEventListener("touchstart",this.onTouchStart),this.container.removeEventListener("touchend",this.onTouchEnd),this.container.removeEventListener("touchcancel",this.onTouchEnd))},e}(i.Component),p=n(157),m=(n(158),c.with("zoom")),f=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).overlay=null,e.image=null,e}r()(e,t);var n=e.prototype;return n.render=function(){var t=this,e=this.props,n=e.src,o=e.onClose;return i.createElement("div",{className:m(),onClick:o,ref:function(e){return t.overlay=e}},i.createElement("img",{ref:function(t){return t&&new p.a(t)},src:n}))},n.componentDidMount=function(){window.addEventListener("touchstart",this.onTouchStart),window.document.body.classList.add("overflow-hidden")},n.componentWillUnmount=function(){window.removeEventListener("touchstart",this.onTouchStart),window.document.body.classList.remove("overflow-hidden")},n.onTouchStart=function(t){console.log(t.touches)},e}(i.Component),v=(n(160),c.with("single")),g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).state={},e}return r()(e,t),e.prototype.render=function(){var t=this,e=this.props,n=e.slug,o=e.pics,r=e.title,c=e.description,s=e.price,a=this.state.zoomed;return i.createElement("section",{className:v()},i.createElement(d,{pics:o,slug:n,onClick:function(e){return t.setState({zoomed:e})}}),a&&i.createElement(f,Object.assign({},a.original,{onClose:function(){return t.setState({zoomed:void 0})}})),i.createElement("div",{className:v("title")},r),i.createElement("div",{className:v("description")},c),!!s&&i.createElement(i.Fragment,null,i.createElement("div",{className:v("price")},"Цена: ",i.createElement("span",null,s," Р")),i.createElement("button",{className:v("buy-btn")},"Купить")))},e}(i.Component);n.d(e,"query",function(){return w});var w="2637456461",E=function(t,e){return t.allFile.edges.map(function(t){var n=t.node,i=n.relativePath.split("/")[1],o=e.find(function(t){return t.id===i});return Object.assign({name:i,preview:n.childImageSharp.resize,original:n.childImageSharp.original},o)})};e.default=function(t){var e=t.pathContext,n=(e.id,e.title),o=e.description,r=e.price,c=e.slug,s=e.slides,a=t.data;return i.createElement(g,{slug:c,pics:E(a,s),title:n,description:o,price:r})}},151:function(t,e,n){},153:function(t,e,n){},155:function(t,e,n){t.exports=n.p+"static/unchecked-295110b012c345d99b76fe0d7ee1f269.png"},156:function(t,e,n){t.exports=n.p+"static/checked-8e4a99812894e754cd4d63d134c7e64a.png"},158:function(t,e,n){},160:function(t,e,n){}}]);
//# sourceMappingURL=component---src-templates-single-tsx-07971260d1c37adcaabc.js.map